<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
<meta charset="UTF-8">
<title>IoT Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0/build/global/luxon.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.0/dist/chartjs-adapter-luxon.min.js"></script>
<link rel="stylesheet" href="{% static 'css/tailwind.css' %}">
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top shadow">
<div class="container-fluid">
<a class="navbar-brand" href="#"><i class="bi bi-cpu"></i> IoT Dashboard</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"><i class="bi bi-database"></i> Masters</a>
<ul class="dropdown-menu">
<li><a class="dropdown-item" href="#" onclick="loadTable('master organizations')">Organizations</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master centre')">Centre</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('devices category')">Devices Category</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master devices')">Devices</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master subscriptioninfo')">Master Subscription Info</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master plan type')">Master Plan Type</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master subscription history')"> Subscription History / <br> Renew Subscription</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master sensor')">Sensors</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master parameter')">Parameter</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('master uom')">Uom</a></li>
<!-- <li><a class="dropdown-item" href="#" onclick="loadTable('se user')">Users</a></li> -->
<li><a class="dropdown-item" href="#" onclick="loadTable('master role')">Roles</a></li>
<!-- <li><a class="dropdown-item" href="#" onclick="loadTable('sensor parameter link')">Sensor-Parameter Links</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('device sensor link')">Device-Sensor Links</a></li> -->

<li>
  <a class="dropdown-item"
     href="#"
     onclick="loadTable('device sensor parameter link')">
     Device-Sensor-Parameter Link
  </a>
</li>


<li><a class="dropdown-item" href="#" onclick="loadTable('master notification time')">Master Notification Time</a></li>

<!-- <li><a class="dropdown-item" href="#" onclick="loadTable('centre organization link')">Centre-Organization Links</a></li> -->
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"><i class="bi bi-journal-text"></i> Logs & Links</a>
<ul class="dropdown-menu">
<li><a class="dropdown-item" href="#" onclick="loadTable('device reading log')">Device Readings</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('device alarm log')">Device Alarms</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('device alarm call log')">Alarm Calls</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('compass dates')">Compass Dates</a></li>
</ul>
</li>

<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"><i class="bi bi-journal-text"></i>User-Management</a>
<ul class="dropdown-menu">
<li><a class="dropdown-item" href="#" onclick="loadTable('create user')">Create-User</a></li>
<li><a class="dropdown-item" href="#" onclick="loadTable('user organization centre link')">User-Organization-Centre-Links</a></li>
</ul>
</li>
</ul>
<ul class="navbar-nav ms-auto">
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"><i class="bi bi-person-circle"></i> Admin</a>
<ul class="dropdown-menu dropdown-menu-end">
<li><a class="dropdown-item" href="#">Profile</a></li>
<li><a class="dropdown-item" href="#" onclick="logout()">Logout</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<!-- Summary Cards -->
<div class="container fade-in">
<div class="row text-white g-4">
<div class="col-md-3">
  <div class="summary-card bg-primary d-flex justify-content-between align-items-center"
       style="cursor:pointer"
       onclick="showDeviceStatusPopup()">
<div><h5>Total Devices</h5><h3 id="totalDevices">0</h3></div><i class="bi bi-hdd-network"></i></div></div>

<div class="col-md-3">
  <div class="summary-card bg-success d-flex justify-content-between align-items-center"
       style="cursor:pointer"
       onclick="showParameterPopup()"><div><h5>Total Parameters</h5><h3 id="totalParameters">0</h3></div><i class="bi bi-sliders"></i></div></div>


<div class="col-md-3">
  <div class="summary-card bg-warning d-flex justify-content-between align-items-center"
       style="cursor:pointer"
       onclick="showSensorFullLinkPopup()">
<div><h5>Total Sensors</h5><h3 id="totalSensors">0</h3></div><i class="bi bi-thermometer-half"></i></div></div>

<div class="col-md-3">
  <div class="summary-card bg-danger d-flex justify-content-between align-items-center"
       style="cursor:pointer"
       onclick="showOrganizationPopup()">
    <div>
      <h5>Total Organizations</h5>
      <h3 id="totalOrganizations">0</h3>
    </div>
    <i class="bi bi-building"></i>
  </div>
</div>

</div>




<!-- Table -->
<div id="tableSection" class="table-container fade-in">
<h3 id="tableTitle">Select a master/log from the navbar</h3>
<button id="addBtn" class="btn btn-sm btn-primary mb-2" onclick="addRow()"><i class="bi bi-plus"></i> Add</button>
<div class="table-responsive">
<table class="table table-striped table-hover" id="mainTable"><thead></thead><tbody></tbody></table>
</div>
</div>
</div>

<!-- Modal -->
<div class="modal" id="crudModal" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content p-4">
<h5 id="modalTitle"></h5>
<form id="crudForm" onsubmit="return false;">
<div id="modalFields"></div>
    <div id="crudMessage" class="alert alert-success d-none"></div> <!-- message div -->
<div class="mt-3 d-flex justify-content-end">
<button type="submit" class="btn btn-success me-2"><i class="bi bi-check2"></i> Save</button>
<button type="button" class="btn btn-secondary" onclick="closeModal()"><i class="bi bi-x"></i> Cancel</button>
</div>
</form>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

<script src="{% static 'js/dashboard.js' %}"></script>




<!-- <h2 id="tableTitle"></h2> -->
</body>
</html>
